<div class="flex flex-col gap-3">
    <div class="flex items-center justify-between h-[48px] bg-secondaryBg p-3">
        <span class="text-xs leading-[18px] font-semibold text-secondary-heiglight">Library</span>
        <span class="w-[16px] h-[14px] cursor-pointer" (click)="closeLibraryDrawer()">
            <img src="assets/svg-icons/drawer-toggle-icon.svg" />
        </span>
    </div>


    <div class="mx-[15px] gap-3 grid-cols-4 flex font-Barlow">

        <div class="w-[190px] flex flex-col gap-3 my-3 p-3 bg-secondaryBg rounded-[5px] font-Barlow">
            <span class="text-xs leading-[18px] font-semibold text-secondary-heiglight">Selection area</span>
            <span class="text-sm font-medium leading-[18px] text-secondaryText font-Barlow">8,080,464.3Â km2</span>
        </div>
        <div class="w-[190px] flex flex-col gap-3 my-3 p-3 bg-secondaryBg rounded-[5px]">
            <span class="text-xs leading-[18px] font-semibold text-secondary-heiglight">Name</span>
            <div class="text-sm flex justify-between font-medium leading-[18px] text-secondaryText">
                <span class="text-sm font-medium leading-[18px] text-secondaryText">Untitled area</span>
                <button mat-button
                    class="cursor-pointer hover:!bg-secondaryBg !h-[18px] !text-yellow font-semibold text-xs leading-[18px]"
                    [matMenuTriggerFor]="menu">Save</button>
            </div>
            <mat-menu class="bg-primaryBg" #menu="matMenu" id="library">
                <div class="p-[15px] flex flex-col gap-[10px]">
                    <div class="flex flex-col gap-3" (click)="$event.stopPropagation()">
                        <span class="text-secondary-heiglight font-semibold text-xs leading-[18px]">Save
                            selection</span>
                        <mat-form-field id="library" appearance="outline" class="!w-[320px]"
                            (click)="$event.stopPropagation()">
                            <mat-label>Name</mat-label>
                            <input matInput placeholder="Placeholder">
                        </mat-form-field>
                    </div>
                    <span (click)="$event.stopPropagation()"><mat-checkbox class="example-margin"
                            [(ngModel)]="checked">Notify me of new updates</mat-checkbox></span>
                    <button
                        class="flex justify-center text-[#453303] items-center text-center w-full h-[38px] py-[10px] bg-yellow rounded-[5px]">Save</button>
                    <button
                        class="flex justify-center text-[##ABB7C0] items-center text-center w-full h-[38px] py-[10px] bg-secondary-heiglight rounded-[5px]">Cancel</button>
                </div>
            </mat-menu>
        </div>
        <div class="w-[190px] flex flex-col gap-3 my-3 p-3 bg-secondaryBg rounded-[5px]">
            <span class="text-xs leading-[18px] font-semibold text-secondary-heiglight">Groups</span>
            <div class="text-sm flex justify-between font-medium leading-[18px] text-secondaryText">
                <span class="text-sm font-medium leading-[18px] text-secondaryText">Not assigned</span>
                <span class="cursor-pointer text-yellow font-semibold text-xs leading-[18px]"
                    [matMenuTriggerFor]="assign">Assign</span>
            </div>
        </div>
        <div class="w-[190px] flex flex-col gap-3 p-3 my-3 bg-secondaryBg rounded-[5px]">
            <span class="text-xs leading-[18px] font-semibold text-secondary-heiglight">Objects</span>
            <span class="text-sm font-medium leading-[18px] text-secondaryText">8660</span>
        </div>

    </div>

    <div class="mx-[15px] bg-secondaryBg rounded-[5px] font-Barlow">
        <div class="mx-[15px] gap-[5px] flex font-Barlow">
            <div *ngFor="let info of statsInfo"
                class="w-[182px] flex flex-col p-[10px] gap-1 my-3 bg-primaryBg rounded-[5px] text-center items-center justify-center">
                <span class="text-xs leading-[18px] font-semibold text-secondary-heiglight">
                    {{ info.label }}
                </span>
                <span class="text-sm font-semibold leading-[18px]" [ngClass]="info?.color">
                    {{ info.value }}
                </span>
            </div>
        </div>

        <div class="mx-[15px] flex font-Barlow">
            <div *ngFor="let level of fillLevels;let isLast = last"
                class="w-[182px] flex p-[10px] flex-col gap-1 my-3 text-center items-center justify-center font-Barlow"
                [ngClass]="{ 'border-r-[2px] border-[#2D343D]': !isLast }">
                <!-- <mat-progress-bar [value]="level.value" mode="determinate" class="vertical-progress-bar h-[150px] w-[10px] mt-2"
                    [ngStyle]="{ 'background-color': '#2D343D', 'border-radius': '5px' }"></mat-progress-bar> -->

                <div class="custom-progress-container">
                    <div class="custom-progress-bar" [ngStyle]="{ height: level.value + '%', background: '#ABB7C0' }">
                    </div>
                </div>
                <span class="text-xs leading-[18px] font-semibold text-secondaryText">{{ level.duration }}</span>
                <span class="flex text-sm font-semibold leading-[18px]"
                    [ngStyle]="{ color: level.trend === 'up' ?'#22F57A':'#F52222' }">
                    {{ level.value }}%
                    <img [src]="level.trend === 'up'?'assets/svg-icons/up-icon.svg' :'assets/svg-icons/down-icon.svg'"
                        alt="up_icon" class="ml-1" />
                </span>
            </div>
        </div>


    </div>

    <div class="bg-secondaryBg w-full" id="custom_table">
        <div class="flex m-[20px] justify-between items-center">
            <p class="text-sm font-semibold leading-[18px] text-secondaryText">Image library 11</p>
            <div class="Menu">
                <div class="flex">
                    <div class="rounded-[25px] bg-primaryBg flex items-center justify-between">
                        <button
                            class="text-xs leading-[18px] py-[9px] font-semibold my-[6px] mr-[10px] ml-[8px] rounded-[19px] px-[20px] text-secondaryText bg-secondaryBg">UTC</button>
                        <button
                            class="text-xs leading-[18px] py-[9px] font-semibold my-[6px] mr-[7px] rounded-[19px] px-[20px] text-secondary-heiglight">Local
                            time</button>
                    </div>
                    <button class="py-[9px] px-[20px] my-0 ml-[8px] rounded-[19px] bg-primaryBg"><img
                            src="assets/svg-icons/filter-icon.svg" alt=""></button>
                    <button class="py-[9px] px-[20px] my-0 mx-[8px] rounded-[19px] bg-primaryBg"><img
                            src="assets/svg-icons/calendar-icon.svg" alt=""></button>
                </div>
            </div>
        </div>


        <table mat-table [dataSource]="dataSource" 
            class="font-Barlow mat-elevation-z8 bg-primaryBg w-full border border-secondaryText rounded-lg">

            <!-- Combined Select and Date Column -->
            <ng-container matColumnDef="selectDate">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">
                    <mat-checkbox (change)="$event ? toggleAllRows() : null"
                        [checked]="selection.hasValue() && isAllSelected()"
                        [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="'Select All'">
                    </mat-checkbox>
                    Date
                </th>
                <td mat-cell *matCellDef="let element" class="p-[10px] flex items-center gap-2">
                    <mat-checkbox (click)="$event.stopPropagation()"
                        (change)="$event ? selection.toggle(element) : null" [checked]="selection.isSelected(element)"
                        [aria-label]="'Select Row'">
                    </mat-checkbox>
                    <span class="text-secondaryText font-Barlow"> {{ element.Date }} </span>
                </td>
            </ng-container>

            <!-- Sensor Column -->
            <ng-container matColumnDef="Sensor">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">Sensor</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.Sensor }} </td>
            </ng-container>

            <!-- Vendor Column -->
            <ng-container matColumnDef="Vendor">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">Vendor</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.Vendor }} </td>
            </ng-container>

            <!-- Cover Column -->
            <ng-container matColumnDef="Cover">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">Cover</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.Cover }} </td>
            </ng-container>

            <!-- Resolution Column -->
            <ng-container matColumnDef="Resolution">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">Resolution</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.Resolution }}
                </td>
            </ng-container>

            <!-- Type Column -->
            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">Type</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.type }} </td>
            </ng-container>

            <!-- ID Column -->
            <ng-container matColumnDef="Id">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">ID</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.Id }} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns" class="bg-secondaryBg"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                class="hover:bg-secondaryHighlight cursor-pointer"></tr>

        </table>



        <!-- <table mat-table [dataSource]="dataSource"
            class="mat-elevation-z8 bg-primaryBg w-full border border-secondaryText rounded-lg">
            <ng-container matColumnDef="select">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">
                    <mat-checkbox (change)="$event ? toggleAllRows() : null"
                        [checked]="selection.hasValue() && isAllSelected()"
                        [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="'Select All'">
                    </mat-checkbox>
                </th>
                <td mat-cell *matCellDef="let row" class="p-[10px]">
                    <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                        [checked]="selection.isSelected(row)" [aria-label]="'Select Row'">
                    </mat-checkbox>
                </td>
            </ng-container>

            <ng-container matColumnDef="Date">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">Date</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.Date }} </td>
            </ng-container>

            <ng-container matColumnDef="Sensor">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">Sensor</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.Sensor }} </td>
            </ng-container>

            <ng-container matColumnDef="Vendor">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">Vendor</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.Vendor }} </td>
            </ng-container>

            <ng-container matColumnDef="Cover">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">Cover</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.Cover }} </td>
            </ng-container>

            <ng-container matColumnDef="Resolution">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">Resolution</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.Resolution }}
                </td>
            </ng-container>

            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">Type</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.type }} </td>
            </ng-container>

            <ng-container matColumnDef="Id">
                <th mat-header-cell *matHeaderCellDef class="p-[10px] text-secondaryText font-semibold">ID</th>
                <td mat-cell *matCellDef="let element" class="p-[10px] text-secondaryText"> {{ element.Id }} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns" class="bg-secondaryBg"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                class="hover:bg-secondaryHighlight cursor-pointer"></tr>

        </table> -->



    </div>
    <mat-menu class="bg-primaryBg" #assign="matMenu" id="assign">
        <div class="p-[15px] flex flex-col gap-[10px]">
            <div class="flex flex-col gap-3" (click)="$event.stopPropagation()">
                <span class="text-secondary-heiglight font-semibold text-xs leading-[18px]">Assign to group</span>
                <mat-form-field id="library" appearance="outline" class="!w-[320px]" (click)="$event.stopPropagation()">
                    <mat-label>Search groups</mat-label>
                    <input matInput placeholder="Search ...">
                    <img src="assets/svg-icons/search-icon.svg" alt="Search" />
                </mat-form-field>
            </div>
            <mat-list>
                <ng-container *ngFor="let group of groups">
                    <ng-template [ngTemplateOutlet]="renderGroup"
                        [ngTemplateOutletContext]="{ $implicit: group }"></ng-template>
                </ng-container>
            </mat-list>
            <span (click)="$event.stopPropagation()"><mat-checkbox class="example-margin" [(ngModel)]="checked">Notify
                    me of new updates</mat-checkbox></span>
            <button
                class="flex justify-center text-[#453303] items-center text-center w-full h-[38px] py-[10px] bg-yellow rounded-[5px]">Save</button>
            <button
                class="flex justify-center text-[##ABB7C0] items-center text-center w-full h-[38px] py-[10px] bg-secondary-heiglight rounded-[5px]">Cancel</button>
        </div>
    </mat-menu>
</div>